<Page x:Class="AlexAssistant.GenerateModel"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
      xmlns:local="clr-namespace:AlexAssistant"
      mc:Ignorable="d"
      d:DesignHeight="450" d:DesignWidth="500"
      Title="Generate Model"
      Background="#2C2C2C"
      Loaded="Page_Loaded">

    <Page.Resources>
        <Style x:Key="PastelBlueButton" TargetType="Button">
            <Setter Property="Background" Value="#79B8D9"/>
            <Setter Property="Foreground" Value="#FFFFFF"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="25,12"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#90CAE9"/>
                                <Setter Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#FFFFFF" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#5A9CBF"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                                <Setter Property="Cursor" Value="Arrow"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Storyboard x:Key="SpinnerAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="SpinnerRotate"
                             Storyboard.TargetProperty="Angle"
                             From="0" To="360"
                             Duration="0:0:1.5"
                             RepeatBehavior="Forever">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="SpinnerGlowEffect"
                             Storyboard.TargetProperty="Opacity"
                             From="0.3" To="0.7"
                             Duration="0:0:1"
                             AutoReverse="True"
                             RepeatBehavior="Forever">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="Spinner"
                              Storyboard.TargetProperty="StrokeDashOffset"
                              From="150" To="0"
                              Duration="0:0:2.5"
                              RepeatBehavior="Forever">
                <DoubleAnimation.EasingFunction>
                    <SineEase EasingMode="EaseInOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>

            <DoubleAnimation Storyboard.TargetName="Dot1"
                             Storyboard.TargetProperty="Opacity"
                             From="0.3" To="1"
                             Duration="0:0:0.6"
                             AutoReverse="True"
                             RepeatBehavior="Forever"
                             BeginTime="0:0:0"/>
            <DoubleAnimation Storyboard.TargetName="Dot2"
                             Storyboard.TargetProperty="Opacity"
                             From="0.3" To="1"
                             Duration="0:0:0.6"
                             AutoReverse="True"
                             RepeatBehavior="Forever"
                             BeginTime="0:0:0.2"/>
            <DoubleAnimation Storyboard.TargetName="Dot3"
                             Storyboard.TargetProperty="Opacity"
                             From="0.3" To="1"
                             Duration="0:0:0.6"
                             AutoReverse="True"
                             RepeatBehavior="Forever"
                             BeginTime="0:0:0.4"/>
        </Storyboard>

        <Storyboard x:Key="SuccessAnimation">
            <DoubleAnimation Storyboard.TargetName="SuccessIconContainer"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.5"/>
            <DoubleAnimation Storyboard.TargetName="SuccessIconScale"
                             Storyboard.TargetProperty="ScaleX"
                             From="0.5" To="1" Duration="0:0:0.7">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="SuccessIconScale"
                             Storyboard.TargetProperty="ScaleY"
                             From="0.5" To="1" Duration="0:0:0.7">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Key="ButtonAppearAnimation">
            <DoubleAnimation Storyboard.TargetName="TrainModelButton"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.4"/>
            <DoubleAnimation Storyboard.TargetName="ButtonTranslate"
                             Storyboard.TargetProperty="Y"
                             From="20" To="0" Duration="0:0:0.5">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Key="TextFadeInAnimation">
            <DoubleAnimation Storyboard.TargetName="InfoText"
                             Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.6"/>
        </Storyboard>

        <Storyboard x:Key="ElementFadeOutAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="1" To="0" Duration="0:0:0.3">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseIn"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

        <Storyboard x:Key="ElementFadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                             From="0" To="1" Duration="0:0:0.4">
                <DoubleAnimation.EasingFunction>
                    <CubicEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>

    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Model Generation"
                   FontSize="24"
                   FontWeight="Medium"
                   Foreground="WhiteSmoke"
                   Margin="25,20,0,15"
                   Grid.Row="0">
            <TextBlock.Effect>
                <DropShadowEffect Color="#79B8D9" BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
            </TextBlock.Effect>
        </TextBlock>

        <Border Background="#333333"
                CornerRadius="12"
                Margin="20,0,20,20"
                Padding="25"
                Grid.Row="1">
            <Border.Effect>
                <DropShadowEffect Color="#222222" BlurRadius="10" ShadowDepth="2" Opacity="0.5"/>
            </Border.Effect>

            <Grid VerticalAlignment="Center">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <Grid x:Name="SpinnerContainer" Width="120" Height="120"
                           HorizontalAlignment="Center" Margin="0,0,0,20"
                           Opacity="0" Visibility="Collapsed">

                        <Ellipse x:Name="SpinnerRing"
                                 Width="80" Height="80"
                                 Stroke="#79B8D9"
                                 StrokeThickness="6"
                                 Opacity="0.2"/>

                        <Ellipse x:Name="Spinner"
                                 Width="80" Height="80"
                                 Stroke="#90CAE9"
                                 StrokeThickness="8"
                                 StrokeDashArray="40 20"
                                 StrokeDashOffset="150"
                                 StrokeEndLineCap="Round"
                                 StrokeStartLineCap="Round"
                                 RenderTransformOrigin="0.5,0.5">
                            <Ellipse.RenderTransform>
                                <RotateTransform x:Name="SpinnerRotate"/>
                            </Ellipse.RenderTransform>
                            <Ellipse.Effect>
                                <DropShadowEffect x:Name="SpinnerGlowEffect" Color="#79B8D9" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                            </Ellipse.Effect>
                        </Ellipse>

                        <Ellipse Width="40" Height="40"
                                 Fill="#444444"
                                 Opacity="0.8"/>

                        <StackPanel Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center">
                            <Ellipse x:Name="Dot1"
                                     Width="6" Height="6"
                                     Fill="#90CAE9"
                                     Margin="3"
                                     Opacity="0.3"/>
                            <Ellipse x:Name="Dot2"
                                     Width="6" Height="6"
                                     Fill="#90CAE9"
                                     Margin="3"
                                     Opacity="0.3"/>
                            <Ellipse x:Name="Dot3"
                                     Width="6" Height="6"
                                     Fill="#90CAE9"
                                     Margin="3"
                                     Opacity="0.3"/>
                        </StackPanel>
                    </Grid>

                    <Grid x:Name="SuccessIconContainer"
                           Width="80" Height="80"
                           HorizontalAlignment="Center" Margin="0,0,0,20"
                           Opacity="0" Visibility="Collapsed"
                           RenderTransformOrigin="0.5,0.5">
                        <Grid.RenderTransform>
                            <ScaleTransform x:Name="SuccessIconScale" ScaleX="1" ScaleY="1"/>
                        </Grid.RenderTransform>
                        <Path x:Name="SuccessIcon"
                              Stretch="Uniform"
                              Fill="#79B8D9"
                              Data="M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z">
                            <Path.Effect>
                                <DropShadowEffect Color="#79B8D9" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                            </Path.Effect>
                        </Path>
                    </Grid>

                    <TextBlock x:Name="InfoText"
                               Text="All snapshots have been successfully taken!"
                               Foreground="WhiteSmoke"
                               FontSize="18"
                               FontWeight="Medium"
                               HorizontalAlignment="Center"
                               TextAlignment="Center"
                               TextWrapping="Wrap"
                               Margin="0,10,0,25"
                               Opacity="0">
                        <TextBlock.Effect>
                            <DropShadowEffect Color="#333333" BlurRadius="2" ShadowDepth="1" Opacity="0.3"/>
                        </TextBlock.Effect>
                    </TextBlock>

                    <Button x:Name="TrainModelButton"
                            Content="Train Model"
                            Style="{StaticResource PastelBlueButton}"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,10"
                            Width="180"
                            Height="45"
                            Click="TrainModelButton_Click"
                            RenderTransformOrigin="0.5,0.5"
                            Opacity="0"
                            Visibility="Collapsed">
                        <Button.RenderTransform>
                            <TranslateTransform x:Name="ButtonTranslate" Y="20"/>
                        </Button.RenderTransform>
                        <Button.Effect>
                            <DropShadowEffect Color="#79B8D9" BlurRadius="15" ShadowDepth="2" Opacity="0.3"/>
                        </Button.Effect>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Page>